<?php require_once("template/header.phtml"); ?>

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Job Listings with Filters</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            .yellow-card-job-list {
                border-left: 5px solid #ffc107;
                border-radius: 5px;
            }
        </style>
    </head>
    <body>
    <div class="container mt-5">
        <!-- Header -->
        <h2 class="mb-4">Job Listings</h2>
        <div class="row">
            <!-- Filters Column -->
            <div class="col-md-3">
                <h4>Filters</h4>
                <div id="filters-output">
                    <h5>Location</h5>
                    <div id="location-filter" class="mb-3"></div>
                    <h5>Length</h5>
                    <div id="length-filter" class="mb-3"></div>
                    <h5>Field</h5>
                    <div id="field-filter" class="mb-3"></div>
                </div>
            </div>

            <!-- Job Listings Column -->
            <div class="col-md-9">
                <h5 class="mb-3">Available Placements</h5>
                <ul class="list-group">
                    <?php foreach ($view->jobListData as $job): ?>
                        <li class="list-group-item yellow-card-job-list p-3 mb-3">
                            <h5 class="mb-2"><?= htmlspecialchars($job->getTitle()); ?></h5>
                            <p class="text-muted mb-1"><?= htmlspecialchars($job->getDescription()); ?></p>
                            <p class="mb-1"><strong>Salary:</strong> <?= htmlspecialchars($job->getSalary()); ?></p>
                            <p class="mb-1"><strong>Location:</strong> <?= htmlspecialchars($job->getLocation()); ?></p>
                            <p class="mb-1"><strong>Skills Required:</strong> <?= htmlspecialchars($job->getSkills()); ?></p>
                            <p class="mb-1"><strong>Start Date:</strong> <?= htmlspecialchars($job->getStartDate()); ?></p>
                            <p class="mb-1"><strong>End Date:</strong> <?= htmlspecialchars($job->getEndDate()); ?></p>
                            <a href="#" class="btn btn-primary btn-sm mt-2">Apply</a>
                        </li>
                    <?php endforeach; ?>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const filters = {
            location: ["Manchester", "London", "Edinburgh", "Birmingham", "Liverpool"],
            length: ["6 weeks", "3 months", "6 months", "1 year"],
            field: ["Computer Science", "Business"]
        };

        const populateFilters = () => {
            for (const [key, options] of Object.entries(filters)) {
                const filterContainer = document.getElementById(`${key}-filter`);
                filterContainer.innerHTML = ""; // Clear previous content

                options.forEach(option => {
                    const formCheck = document.createElement("div");
                    formCheck.classList.add("form-check", "mb-2");

                    const checkbox = document.createElement("input");
                    checkbox.type = "checkbox";
                    checkbox.classList.add("form-check-input");
                    checkbox.id = `${key}-${option.toLowerCase().replace(/\s+/g, "-")}`;
                    checkbox.value = option;

                    const label = document.createElement("label");
                    label.classList.add("form-check-label");
                    label.htmlFor = checkbox.id;
                    label.textContent = option;

                    formCheck.appendChild(checkbox);
                    formCheck.appendChild(label);
                    filterContainer.appendChild(formCheck);
                });
            }
        };

        // Populate all filters on page load
        document.addEventListener("DOMContentLoaded", populateFilters);
    </script>
    </body>
    </html>

<?php require_once("template/footer.phtml"); ?>
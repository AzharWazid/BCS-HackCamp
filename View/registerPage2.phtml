<?php require_once('template/header.phtml'); ?>

    <div class="container mt-5">
        <h1 class="text-center">Additional Information</h1>
        <p class="lead text-center">Please provide more details to help us find the best placements for you.</p>

        <form action="registerPage2.phtml" method="POST" enctype="multipart/form-data">
            <!-- Skills, Category, and Levels Section -->
            <div class="row">
                <!-- Skills Section -->
                <div class="col-md-4">
                    <h3>Skills</h3>
                    <p>Select the skills you have:</p>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill1" name="skills[]" value="Data Management">
                        <label class="form-check-label" for="skill1">Data Management</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill2" name="skills[]" value="Digital Forensics">
                        <label class="form-check-label" for="skill2">Digital Forensics</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill3" name="skills[]" value="Employee Experience">
                        <label class="form-check-label" for="skill3">Employee Experience</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill4" name="skills[]" value="High Performance Computing">
                        <label class="form-check-label" for="skill4">High-Performance Computing</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill5" name="skills[]" value="Innovation">
                        <label class="form-check-label" for="skill5">Innovation</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill6" name="skills[]" value="IT Infrastructure">
                        <label class="form-check-label" for="skill6">IT Infrastructure</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill7" name="skills[]" value="Machine Learning">
                        <label class="form-check-label" for="skill7">Machine Learning</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill8" name="skills[]" value="Methods and Tools">
                        <label class="form-check-label" for="skill8">Methods and Tools</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill9" name="skills[]" value="Numerical Analysis">
                        <label class="form-check-label" for="skill9">Numerical Analysis</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="skill10" name="skills[]" value="Portfolio Management">
                        <label class="form-check-label" for="skill10">Portfolio Management</label>
                    </div>
                </div>

                <!-- Category Section -->
                <div class="col-md-4">
                    <h3>Category</h3>
                    <p>Select the categories you are interested in:</p>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="category1" name="categories[]" value="Computer Science">
                        <label class="form-check-label" for="category1">Computer Science</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="category2" name="categories[]" value="Business">
                        <label class="form-check-label" for="category2">Business</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="category3" name="categories[]" value="Communication Skills">
                        <label class="form-check-label" for="category3">Communication Skills</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="category4" name="categories[]" value="Data Science">
                        <label class="form-check-label" for="category4">Data Science</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="category5" name="categories[]" value="Marketing">
                        <label class="form-check-label" for="category5">Marketing</label>
                    </div>
                </div>

                <!-- Levels Section -->
                <div class="col-md-4">
                    <h3>Levels</h3>
                    <p>Select your level(s):</p>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="level1" name="levels[]" value="Level 1">
                        <label class="form-check-label" for="level1">Level 1</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="level2" name="levels[]" value="Level 2">
                        <label class="form-check-label" for="level2">Level 2</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="level3" name="levels[]" value="Level 3">
                        <label class="form-check-label" for="level3">Level 3</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="level4" name="levels[]" value="Level 4">
                        <label class="form-check-label" for="level4">Level 4</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="level5" name="levels[]" value="Level 5">
                        <label class="form-check-label" for="level5">Level 5</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="level6" name="levels[]" value="Level 6">
                        <label class="form-check-label" for="level6">Level 6</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="level7" name="levels[]" value="Level 7">
                        <label class="form-check-label" for="level7">Level 7</label>
                    </div>
                </div>
            </div>

            <!-- CV Upload Section -->
            <div class="mt-4">
                <h3>Upload Your CV</h3>
                <div class="mb-3">
                    <label for="cvUpload" class="form-label">Upload CV</label>
                    <input class="form-control" type="file" id="cvUpload" name="cv_file" accept=".pdf,.doc,.docx" required>
                </div>
            </div>

            <!-- Register Button -->
            <div class="d-grid gap-2 col-6 mx-auto mt-4">
                <button class="btn btn-success" type="submit" name="register">Register</button>
            </div>
        </form>

        <?php
        // Handle form submission
        if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['register'])) {
            // Handle CV upload
            if (isset($_FILES['cv_file'])) {
                $uploadDir = 'uploads/';
                if (!is_dir($uploadDir)) {
                    mkdir($uploadDir, 0777, true);
                }

                $cvFile = $uploadDir . basename($_FILES['cv_file']['name']);

                if (move_uploaded_file($_FILES['cv_file']['tmp_name'], $cvFile)) {
                    echo "<div class='alert alert-success mt-3' role='alert'>CV uploaded successfully!</div>";
                    $_SESSION['uploaded_cv'] = $cvFile;
                } else {
                    echo "<div class='alert alert-danger mt-3' role='alert'>Failed to upload CV. Please try again.</div>";
                }
            }

            // Process selected skills
            if (isset($_POST['skills'])) {
                $selectedSkills = $_POST['skills'];
                echo "<div class='alert alert-info mt-3' role='alert'>Skills selected: " . implode(', ', $selectedSkills) . "</div>";
            }

            // Process selected categories
            if (isset($_POST['categories'])) {
                $selectedCategories = $_POST['categories'];
                echo "<div class='alert alert-info mt-3' role='alert'>Categories selected: " . implode(', ', $selectedCategories) . "</div>";
            }

            // Process selected levels
            if (isset($_POST['levels'])) {
                $selectedLevels = $_POST['levels'];
                echo "<div class='alert alert-info mt-3' role='alert'>Levels selected: " . implode(', ', $selectedLevels) . "</div>";
            }
        }
        ?>
    </div>

<?php require_once("template/footer.phtml"); ?>